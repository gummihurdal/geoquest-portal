import{j as F}from"./index-Bd_DHDBH.js";import{b as u}from"./router-BWemF75i.js";import{S as W,P as X,W as Y,a as R,T as H,M as P,b as z,B as T,A as V,D as k,c as q,d as U,e as _,f as I}from"./three-Bh8RFhjZ.js";function Z(J){const m=u.useRef(null),A=u.useRef(null);return u.useEffect(()=>{if(!m.current)return;const n=m.current,w=n.clientWidth,p=n.clientHeight,o=new W,i=new X(45,w/p,.1,1e3);i.position.z=2.5;const t=new Y({antialias:!0,alpha:!0});t.setSize(w,p),t.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.appendChild(t.domElement);const G=new R(1,64,64),S=new H().load("/textures/earth.jpg"),j=new P({map:S}),s=new z(G,j);o.add(s);const B=new R(1.02,64,64),C=new P({color:3900150,transparent:!0,opacity:.08,side:T});o.add(new z(B,C)),o.add(new V(4210784,.5));const f=new k(16777215,1.2);f.position.set(5,3,5),o.add(f);const h=new q,x=2e3,y=new Float32Array(x*3);for(let e=0;e<x*3;e++)y[e]=(Math.random()-.5)*200;h.setAttribute("position",new U(y,3));const D=new _({color:16777215,size:.15,transparent:!0,opacity:.6});o.add(new I(h,D));let a=!1,c={x:0,y:0},r={x:0,y:0};const v=e=>{a=!0,c={x:e.clientX,y:e.clientY},r={x:0,y:0}},E=e=>{if(!a)return;const d=e.clientX-c.x,b=e.clientY-c.y;s.rotation.y+=d*.005,s.rotation.x+=b*.005,r={x:b*.005,y:d*.005},c={x:e.clientX,y:e.clientY}},g=()=>{a=!1};t.domElement.addEventListener("mousedown",v),window.addEventListener("mousemove",E),window.addEventListener("mouseup",g);let l=0;const L=()=>{l=requestAnimationFrame(L),a||(s.rotation.y+=.001,r.x*=.95,r.y*=.95,s.rotation.x+=r.x,s.rotation.y+=r.y),t.render(o,i)};L(),A.current={renderer:t,scene:o,camera:i,globe:s,animFrame:l,isDragging:a,lastMouse:c,rotationVelocity:r};const M=()=>{const e=n.clientWidth,d=n.clientHeight;i.aspect=e/d,i.updateProjectionMatrix(),t.setSize(e,d)};return window.addEventListener("resize",M),()=>{cancelAnimationFrame(l),t.domElement.removeEventListener("mousedown",v),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",g),window.removeEventListener("resize",M),t.dispose(),n.contains(t.domElement)&&n.removeChild(t.domElement)}},[]),F.jsx("div",{ref:m,style:{width:"100%",height:"100%",cursor:"grab",borderRadius:12,overflow:"hidden"}})}export{Z as default};
